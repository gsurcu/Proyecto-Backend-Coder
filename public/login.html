<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--Import Google Icon Font-->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <!--Import materialize.css-->
    <link
      type="text/css"
      rel="stylesheet"
      href="css/materialize.min.css"
      media="screen,projection"
    />
    <link
      type="text/css"
      rel="stylesheet"
      href="css/login.css"
      media="screen,projection"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Secular+One&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css"
    />
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DigiBank</title>
  </head>
  <body>
    <div class="login-background">
      <img src="./img/login/login-background.jpg" alt="login-background.png" />
      <div class="container login-form">
        <div class="row form-container">
          <div class="col s6 valign-wrapper sign-in hide-form" id="sign-in-form">
            <div class="section container" style="width: 70%; height: 90%">
              <h4
                class="teal-text text-lighten-2 center-align"
                style="width: 100%"
              >
                Sign in to DigiBank
              </h4>
              <div class="row">
                <!-- <button class="twitter-authenticate">Sign in with Twitter</button> -->
                <form action="/api/auth/login" method="post" class="col s12">
                  <div class="input-field col s12">
                    <i class="material-icons prefix teal-text text-lighten-2"
                      >account_circle</i
                    >
                    <input
                      id="log-email"
                      type="email"
                      name="username"
                      class="validate"
                      required
                    />
                    <label for="log-email">Email</label>
                    <span
                      class="helper-text"
                      data-error="Please check your email"
                    ></span>
                  </div>
                  <div class="input-field col s12">
                    <i class="material-icons prefix teal-text text-lighten-2"
                      >verified_user</i
                    >
                    <input
                      id="log-password"
                      type="password"
                      name="password"
                      required
                    />
                    <label for="log-password">Password</label>
                  </div>
                  <div class="section digi-button-cont">
                    <button
                      class="btn waves-effect waves-light digi-button"
                      type="submit"
                      name="action"
                    >
                      SIGN IN
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
          <div class="col s6 valign-wrapper sign-up" id="sign-up-form">
            <div class="section container" style="width: 70%; height: 90%">
              <h4
                class="teal-text text-lighten-2 center-align"
                style="width: 100%"
              >
                Create Account
              </h4>
              <div class="row">
                <form action="/api/auth/register" method="post" class="col s12" enctype="multipart/form-data" onsubmit="process(event)">
                  <div class="row">
                    <div class="input-field col s6">
                      <input
                        id="firstname"
                        type="text"
                        class="validate"
                        name="firstname"
                        required
                      />
                      <label for="firstname">First Name</label>
                      <span
                        class="helper-text"
                        data-error="This field is required"
                      ></span>
                    </div>
                    <div class="input-field col s6">
                      <input
                        id="lastname"
                        type="text"
                        class="validate"
                        name="lastname"
                        required
                      />
                      <label for="lastname">Last Name</label>
                      <span
                        class="helper-text"
                        data-error="This field is required"
                      ></span>
                    </div>
                    <div class="input-field col s12">
                      <input
                        id="datepicker"
                        type="text"
                        class="datepicker p-left"
                        name="birthdate"
                      />
                      <label for="datepicker" class="pos-left">Birthdate</label>
                      <span
                        class="helper-text"
                        data-error="This field is required"
                      ></span>
                      <i class="material-icons prefix teal-text text-lighten-2"
                        >today</i
                      >
                    </div>
                    <div class="input-field col s12">
                      <input
                        id="phone"
                        type="tel"
                        class="validate"
                        name="phone"
                        required
                      />
                      <label for="phone" class="pos-left"></label>
                      <span
                        class="helper-text"
                        data-error="This field is required"
                        >
                        <div class="alert alert-info" style="display: none;"></div>
                        <div class="alert alert-error" style="display: none"></div>
                      </span>
                      <input type="text" id="telephone" name="telephone" style="display: none;" required>
                    </div>
                    <div class="input-field col s12">
                      <input
                        id="email"
                        type="email"
                        class="validate p-left"
                        name="username"
                        required
                      />
                      <label for="email" class="pos-left">Email</label>
                      <span
                        class="helper-text"
                        data-error="Please check your email"
                      >
                        We'll keep your email private!
                      </span>
                      <span
                        class="helper-text"
                        data-error="This field is required"
                      ></span>
                      <i class="material-icons prefix teal-text text-lighten-2"
                        >email</i
                      >
                    </div>
                    <div class="input-field col s12">
                      <input
                        id="password"
                        type="password"
                        class="p-left"
                        name="password"
                        required
                      />
                      <label for="password" class="pos-left">Password</label>
                      <span
                        class="helper-text"
                        data-error="This field is required"
                      ></span>
                      <i class="material-icons prefix teal-text text-lighten-2"
                        >security</i
                      >
                    </div>
                    <div class="file-field input-field col s12">
                      <div class="btn">
                        <span>File</span>
                        <input
                          id="image" 
                          type="file" 
                          name="image" 
                          required>
                      </div>
                      <div class="file-path-wrapper">
                        <input
                          type="text" 
                          class="file-path validate" 
                          required>
                      </div>
                      <span
                        class="helper-text"
                        data-error="This field is required"
                      ></span>
                    </div>
                    <div class="digi-button-cont">
                      <button
                        class="btn waves-effect waves-light digi-button"
                        type="submit"
                        name="action"
                      >
                        SIGN UP
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        <div class="login-cover">
          <div class="login-window" id="form-window">
            <div class="login-content valign-wrapper" id="form-content">
              <div class="login-row">
                <div class="login-col">
                  <div class="container">
                    <h4 style="text-align: center">
                      Welcome Back!
                      <span style="font-size: 50px">&#9996;</span>
                    </h4>
                    <div class="section">
                      <p
                        class="flow-text"
                        style="text-align: center; opacity: 0.7"
                      >
                        We've missed you!
                        <br />
                        Just log in as always to have fun!
                      </p>
                    </div>
                    <div class="digi-cover-button-cont">
                      <button
                        class="btn-flat waves-effect waves-light digi-cover-button"
                        id="cover-sign-in-btn"
                      >
                        SIGN IN
                      </button>
                    </div>
                  </div>
                </div>
                <div class="login-col">
                  <div class="container">
                    <h4 style="text-align: center">
                      Hello Friend!
                      <span style="font-size: 50px">&#128075;</span>
                    </h4>
                    <div class="section">
                      <p
                        class="flow-text"
                        style="text-align: center; opacity: 0.7"
                      >
                        New here?
                        <br />
                        Enter your personal details and start your journey with
                        us!
                      </p>
                    </div>
                    <div class="digi-cover-button-cont">
                      <button
                        class="btn-flat waves-effect waves-light digi-cover-button"
                        id="cover-sign-up-btn"
                      >
                        SIGN UP
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--JavaScript at end of body for optimized loading-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
    <script type="text/javascript" src="./js/materialize.min.js"></script>
    <script type="text/javascript" src="./js//login.js"></script>
  </body>
  <script>
    const phoneInputField = document.querySelector("#phone");
    const phoneInput = window.intlTelInput(phoneInputField, {
      utilsScript:
      "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
    });
    const info = document.querySelector(".alert-info");
    const error = document.querySelector(".alert-error");
    
    phoneInputField.addEventListener('change', e => {
      process(e);
    })
    function process(event) {

      const phoneNumber = phoneInput.getNumber();

      info.style.display = "none";
      error.style.display = "none";

      if (phoneInput.isValidNumber()) {
        info.style.display = "";
        info.innerHTML = "Phone number is valid" 
        console.log(`Phone number in E.164 format: <strong>${phoneNumber}</strong>`);
        const telephoneInput = document.getElementById('telephone');
        telephoneInput.value = phoneNumber;
        setTimeout(()=> {
          info.style.visibility = "hidden";
        }, 2000)
      } else {
        event.preventDefault();
        error.style.display = "";
        error.innerHTML = `Invalid phone number.`;
        info.style.visibility = ""
      }
    }
  </script>
</html>
